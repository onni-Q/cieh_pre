
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>The Quriousity Spotlight</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        :root { --dark: #1a1a1a; --white: #ffffff; --teach-color: #3498db; --learn-color: #e74c3c; --shadow: 6px 6px 0px #1a1a1a; }
        body { font-family: 'Space Grotesk', sans-serif; background: #fdfdfd; background-image: radial-gradient(#1a1a1a 0.5px, transparent 0.5px); background-size: 20px 20px; display: flex; justify-content: center; padding: 40px 20px; color: var(--dark); }
        .card { background: var(--white); width: 100%; max-width: 750px; padding: 40px; border: 4px solid var(--dark); box-shadow: var(--shadow); border-radius: 4px; }
        h2 { font-size: 2.2rem; text-transform: uppercase; line-height: 0.9; margin-bottom: 25px; letter-spacing: -1px; }
        label { display: block; font-weight: 800; font-size: 0.75rem; text-transform: uppercase; margin-bottom: 5px; color: #555; }
        .progress-bar { height: 16px; border: 3px solid var(--dark); margin-bottom: 30px; background: #eee; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--teach-color); width: 25%; transition: 0.5s; }
        input, select { width: 100%; padding: 15px; margin-bottom: 20px; border: 3px solid var(--dark); font-size: 1rem; font-weight: bold; outline: none; box-sizing: border-box; background: white; }
        .word-cloud { display: flex; flex-wrap: wrap; gap: 8px; }
        .tag { padding: 8px 16px; border: 2px solid var(--dark); cursor: pointer; font-weight: 800; background: white; transition: 0.1s; font-size: 0.9rem; }
        .tag-teach.selected { background: var(--teach-color); color: white; box-shadow: 3px 3px 0px var(--dark); }
        .tag-learn.selected { background: var(--learn-color); color: white; box-shadow: 3px 3px 0px var(--dark); }
        button { width: 100%; padding: 18px; background: var(--dark); color: white; border: none; font-size: 1.1rem; font-weight: 900; cursor: pointer; text-transform: uppercase; margin-top: 20px; }
        #map { height: 350px; border: 4px solid var(--dark); margin: 20px 0; }
        .seminar-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .seminar-card { background: white; border: 3px solid var(--dark); padding: 15px; position: relative; }
        .dist-tag { background: var(--dark); color: white; font-size: 0.65rem; padding: 3px 7px; position: absolute; top: -3px; right: -3px; border: 2px solid var(--dark); }
        .match-type { font-size: 0.65rem; font-weight: 900; text-transform: uppercase; margin-bottom: 5px; letter-spacing: 0.5px; }
        .hidden { display: none; }
        .category-group { margin-bottom: 25px; border-bottom: 2px solid #eee; padding-bottom: 15px; }
        .category-label { font-weight: 900; text-transform: uppercase; font-size: 0.75rem; color: #777; margin-bottom: 10px; }
        #matchCount { font-weight: 800; margin-bottom: 15px; text-transform: uppercase; font-size: 0.8rem; color: var(--dark); border-left: 4px solid var(--learn-color); padding-left: 10px; }
        .host-name { font-size: 0.8rem; margin-top: 8px; font-weight: 700; color: #444; }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
<div class="card">
    <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
    
    <div id="step1">
        <h2>The Quriousity Spotlight ðŸ”Ž <br> <br> Amsterdam Edition</h2>
        <label>Full Name</label>
        <input type="text" id="userName" placeholder="Saskia van den Berg">
        <label>Email Address</label>
        <input type="email" id="userEmail" placeholder="saskia@example.nl">
        <label>Neighborhood</label>
        <select id="userLoc"><option value="Bos en Lommer">Bos en Lommer</option><option value="Buitenveldert">Buitenveldert</option><option value="De Baarsjes">De Baarsjes</option><option value="De Pijp">De Pijp</option><option value="Grachtengordel">Grachtengordel</option><option value="IJburg">IJburg</option><option value="Indische Buurt">Indische Buurt</option><option value="Jordaan">Jordaan</option><option value="NDSM">NDSM</option><option value="Noord-Centrum">Noord-Centrum</option><option value="Oosterparkbuurt">Oosterparkbuurt</option><option value="Oud-West">Oud-West</option><option value="Oud-Zuid">Oud-Zuid</option><option value="Plantage">Plantage</option><option value="Watergraafsmeer">Watergraafsmeer</option><option value="Westerpark">Westerpark</option><option value="Zuidas">Zuidas</option></select>
        <button onclick="goToStep2a()">Spotlight ðŸ”Ž â†’</button>
    </div>

    <div id="step2a" class="hidden">
        <h2 id="teachTitle">What are your skils?</h2>
        <div class="category-group"><div class="category-label">ðŸŽ¨ Art & Craft</div><div class="word-cloud"><div class="tag tag-teach" onclick="toggleTag(this, 'teach')">Painting</div><div class="tag tag-teach" onclick="toggleTag(this, 'teach')">Ceramic Art</div><div class="tag tag-teach" onclick="toggleTag(this, 'teach')">Photography</div><div class="tag tag-teach" onclick="toggleTag(this, 'teach')">UX Design</div></div></div><div class="category-group"><div class="category-label">ðŸ¥‘ Lifestyle</div><div class="word-cloud"><div class="tag tag-teach" onclick="toggleTag(this, 'teach')">Dutch Cooking</div><div class="tag tag-teach" onclick="toggleTag(this, 'teach')">Gardening</div><div class="tag tag-teach" onclick="toggleTag(this, 'teach')">Urban Hiking</div><div class="tag tag-teach" onclick="toggleTag(this, 'teach')">Yoga</div></div></div><div class="category-group"><div class="category-label">ðŸ’» Tech & Data</div><div class="word-cloud"><div class="tag tag-teach" onclick="toggleTag(this, 'teach')">Machine Learning</div><div class="tag tag-teach" onclick="toggleTag(this, 'teach')">Python</div><div class="tag tag-teach" onclick="toggleTag(this, 'teach')">Data Viz</div><div class="tag tag-teach" onclick="toggleTag(this, 'teach')">Web Dev</div></div></div><div class="category-group"><div class="category-label">ðŸ“ˆ Business</div><div class="word-cloud"><div class="tag tag-teach" onclick="toggleTag(this, 'teach')">Public Speaking</div><div class="tag tag-teach" onclick="toggleTag(this, 'teach')">Financial Modeling</div><div class="tag tag-teach" onclick="toggleTag(this, 'teach')">Agile Coach</div><div class="tag tag-teach" onclick="toggleTag(this, 'teach')">SEO</div></div></div>
        <button onclick="goToStep2b()">Next Step</button>
    </div>

    <div id="step2b" class="hidden">
        <h2>What do you want to learn?</h2>
        <div class="category-group"><div class="category-label">ðŸŽ¨ Art & Craft</div><div class="word-cloud"><div class="tag tag-learn" onclick="toggleTag(this, 'learn')">Painting</div><div class="tag tag-learn" onclick="toggleTag(this, 'learn')">Ceramic Art</div><div class="tag tag-learn" onclick="toggleTag(this, 'learn')">Photography</div><div class="tag tag-learn" onclick="toggleTag(this, 'learn')">UX Design</div></div></div><div class="category-group"><div class="category-label">ðŸ¥‘ Lifestyle</div><div class="word-cloud"><div class="tag tag-learn" onclick="toggleTag(this, 'learn')">Dutch Cooking</div><div class="tag tag-learn" onclick="toggleTag(this, 'learn')">Gardening</div><div class="tag tag-learn" onclick="toggleTag(this, 'learn')">Urban Hiking</div><div class="tag tag-learn" onclick="toggleTag(this, 'learn')">Yoga</div></div></div><div class="category-group"><div class="category-label">ðŸ’» Tech & Data</div><div class="word-cloud"><div class="tag tag-learn" onclick="toggleTag(this, 'learn')">Machine Learning</div><div class="tag tag-learn" onclick="toggleTag(this, 'learn')">Python</div><div class="tag tag-learn" onclick="toggleTag(this, 'learn')">Data Viz</div><div class="tag tag-learn" onclick="toggleTag(this, 'learn')">Web Dev</div></div></div><div class="category-group"><div class="category-label">ðŸ“ˆ Business</div><div class="word-cloud"><div class="tag tag-learn" onclick="toggleTag(this, 'learn')">Public Speaking</div><div class="tag tag-learn" onclick="toggleTag(this, 'learn')">Financial Modeling</div><div class="tag tag-learn" onclick="toggleTag(this, 'learn')">Agile Coach</div><div class="tag tag-learn" onclick="toggleTag(this, 'learn')">SEO</div></div></div>
        <button onclick="showFinalResults()" style="background: var(--learn-color);">Find Matches</button>
    </div>

    <div id="step3" class="hidden">
        <h2>Workshops Near You</h2>
        <div id="matchCount"></div>
        <div id="map"></div>
        <div class="seminar-grid" id="seminarGrid"></div>
        
        <button id="loadMoreBtn" onclick="loadMore()" style="background: white; color: var(--dark); border: 3px solid var(--dark); margin-top: 15px;" class="hidden">Load More Matches (+10)</button>
        <button onclick="location.reload()" style="background: #999;">Start Over</button>
    </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    const allSeminars = [{"host": "Nicole Gonzalez", "skill": "Data Viz", "location_name": "IJburg", "coords": [52.3559283052711, 5.009232304081014]}, {"host": "Michael Glenn", "skill": "Python", "location_name": "IJburg", "coords": [52.35631289493218, 5.00452605255484]}, {"host": "Jason Lewis", "skill": "Gardening", "location_name": "Watergraafsmeer", "coords": [52.34534181578587, 4.947267106345644]}, {"host": "Michael Dorsey", "skill": "Yoga", "location_name": "Noord-Centrum", "coords": [52.38818413910579, 4.909427544226281]}, {"host": "Steven King", "skill": "Financial Modeling", "location_name": "Bos en Lommer", "coords": [52.3781903618062, 4.840577797808307]}, {"host": "Dorothy Scott", "skill": "SEO", "location_name": "De Baarsjes", "coords": [52.36550738023527, 4.853163675470132]}, {"host": "Sandra Hernandez", "skill": "Photography", "location_name": "Oud-West", "coords": [52.36698285407257, 4.869876758076036]}, {"host": "Brittany Carter", "skill": "Photography", "location_name": "Zuidas", "coords": [52.33934387753387, 4.865251309148128]}, {"host": "Michelle Gregory", "skill": "Photography", "location_name": "Indische Buurt", "coords": [52.358572341364464, 4.951666408290175]}, {"host": "James Wilson", "skill": "Data Viz", "location_name": "Oosterparkbuurt", "coords": [52.357852399838634, 4.909233095481935]}, {"host": "Katherine Long", "skill": "Financial Modeling", "location_name": "De Pijp", "coords": [52.36012913224334, 4.886651214854243]}, {"host": "Terri Butler", "skill": "Data Viz", "location_name": "Oud-Zuid", "coords": [52.350446902675934, 4.879068151092498]}, {"host": "Rachel Stafford", "skill": "Public Speaking", "location_name": "Buitenveldert", "coords": [52.334285315484095, 4.880032534076059]}, {"host": "Brian Frank", "skill": "Machine Learning", "location_name": "Grachtengordel", "coords": [52.36943678518294, 4.881074738512572]}, {"host": "Melissa Hebert", "skill": "Python", "location_name": "Westerpark", "coords": [52.38035894134662, 4.870504578730455]}, {"host": "Todd Morgan", "skill": "Urban Hiking", "location_name": "Noord-Centrum", "coords": [52.392923941424506, 4.909955300378744]}, {"host": "Jennifer Gordon", "skill": "Urban Hiking", "location_name": "Watergraafsmeer", "coords": [52.35139183907162, 4.941941781560424]}, {"host": "Laura Hebert", "skill": "Yoga", "location_name": "Zuidas", "coords": [52.33296803988051, 4.873997706760191]}, {"host": "Holly English", "skill": "Machine Learning", "location_name": "Zuidas", "coords": [52.34330868983145, 4.877020693637163]}, {"host": "Michael Gomez", "skill": "Gardening", "location_name": "Bos en Lommer", "coords": [52.38347270963221, 4.85640207627281]}, {"host": "Jonathan Ramirez", "skill": "Data Viz", "location_name": "Oosterparkbuurt", "coords": [52.36353823885421, 4.919534728237465]}, {"host": "Nathan Kelly", "skill": "Dutch Cooking", "location_name": "IJburg", "coords": [52.35916979320039, 5.012063670753761]}, {"host": "Lisa Potts", "skill": "Web Dev", "location_name": "NDSM", "coords": [52.40578804727844, 4.888301372117333]}, {"host": "Stephanie Rodriguez", "skill": "Machine Learning", "location_name": "De Pijp", "coords": [52.35151795536683, 4.887442736834661]}, {"host": "Stephanie Gordon", "skill": "UX Design", "location_name": "IJburg", "coords": [52.356108936795025, 5.009749740986804]}, {"host": "James Conway", "skill": "Python", "location_name": "Buitenveldert", "coords": [52.32983135911526, 4.865758170067022]}, {"host": "Sean Jimenez", "skill": "Painting", "location_name": "Oud-Zuid", "coords": [52.35561726583957, 4.868324008246549]}, {"host": "Luis Morris", "skill": "Ceramic Art", "location_name": "Oosterparkbuurt", "coords": [52.354612186106834, 4.916413457587383]}, {"host": "Whitney Alexander", "skill": "SEO", "location_name": "Noord-Centrum", "coords": [52.39146722365065, 4.919274828116559]}, {"host": "Darius Hansen", "skill": "Painting", "location_name": "NDSM", "coords": [52.40399728685495, 4.884800836328458]}, {"host": "Stacy Lee", "skill": "Agile Coach", "location_name": "Watergraafsmeer", "coords": [52.347446793429874, 4.938712732527426]}, {"host": "Leslie Boone", "skill": "Python", "location_name": "Grachtengordel", "coords": [52.36929053561419, 4.874004992162198]}, {"host": "Derrick Cruz", "skill": "Yoga", "location_name": "Plantage", "coords": [52.371238705695205, 4.909079723222849]}, {"host": "Clayton Rivers", "skill": "Machine Learning", "location_name": "Plantage", "coords": [52.36667051663906, 4.92015264460836]}, {"host": "Angela Smith", "skill": "Web Dev", "location_name": "Zuidas", "coords": [52.33300006708593, 4.873522984268156]}, {"host": "Kathy Garcia", "skill": "Python", "location_name": "Oud-Zuid", "coords": [52.35604060536368, 4.878654270062317]}, {"host": "Timothy Taylor", "skill": "Python", "location_name": "De Baarsjes", "coords": [52.37139599724871, 4.84752891794053]}, {"host": "Mrs. Emily Jordan MD", "skill": "Web Dev", "location_name": "Zuidas", "coords": [52.33461516170365, 4.870426766724132]}, {"host": "Michael Perry", "skill": "SEO", "location_name": "Indische Buurt", "coords": [52.36640093607239, 4.937248568206555]}, {"host": "Keith Brown", "skill": "UX Design", "location_name": "NDSM", "coords": [52.40089624853611, 4.901261524902013]}, {"host": "Annette Brown", "skill": "Ceramic Art", "location_name": "Watergraafsmeer", "coords": [52.34675504824474, 4.944859118561384]}, {"host": "Timothy Hernandez", "skill": "Machine Learning", "location_name": "NDSM", "coords": [52.401637873356314, 4.892184170588968]}, {"host": "Barry Conrad", "skill": "Python", "location_name": "Plantage", "coords": [52.36609097593874, 4.902733181468416]}, {"host": "David Mejia", "skill": "Python", "location_name": "Oosterparkbuurt", "coords": [52.36529278551331, 4.917525159301319]}, {"host": "David Costa", "skill": "Data Viz", "location_name": "Jordaan", "coords": [52.37591034962783, 4.877670621976902]}, {"host": "Marissa Young", "skill": "Painting", "location_name": "De Baarsjes", "coords": [52.37383165352957, 4.857763541200103]}, {"host": "Jeffrey Bryant", "skill": "Painting", "location_name": "Indische Buurt", "coords": [52.36703696384311, 4.944726818270407]}, {"host": "Carmen Lewis", "skill": "Painting", "location_name": "Oud-West", "coords": [52.3697956673381, 4.86502118128376]}, {"host": "Destiny Rogers", "skill": "Data Viz", "location_name": "Oud-West", "coords": [52.36839801087234, 4.863582804564615]}, {"host": "Cheryl Holmes", "skill": "UX Design", "location_name": "Grachtengordel", "coords": [52.36441925307175, 4.878733075471466]}, {"host": "Susan Travis", "skill": "Dutch Cooking", "location_name": "IJburg", "coords": [52.355141307089006, 5.00247633985734]}, {"host": "Doris Suarez", "skill": "Photography", "location_name": "Oud-West", "coords": [52.36989946031843, 4.877822593622895]}, {"host": "Nicole Escobar", "skill": "Photography", "location_name": "De Pijp", "coords": [52.35357398193787, 4.891945226239183]}, {"host": "Amanda Carter", "skill": "Web Dev", "location_name": "IJburg", "coords": [52.35592904665231, 5.005147097872237]}, {"host": "Jordan Holmes", "skill": "Web Dev", "location_name": "Bos en Lommer", "coords": [52.37803575306895, 4.845562910046713]}, {"host": "John Nelson", "skill": "Data Viz", "location_name": "Watergraafsmeer", "coords": [52.355902528315916, 4.949026373842941]}, {"host": "Crystal Lewis", "skill": "Machine Learning", "location_name": "Zuidas", "coords": [52.33586419523707, 4.87604558267817]}, {"host": "Steven Johnson", "skill": "Painting", "location_name": "Grachtengordel", "coords": [52.364586766949294, 4.890884252559683]}, {"host": "Jimmy Joseph", "skill": "UX Design", "location_name": "Jordaan", "coords": [52.3726464695858, 4.885006909944706]}, {"host": "Brian Thomas", "skill": "Python", "location_name": "Bos en Lommer", "coords": [52.37263454759169, 4.848231173453095]}, {"host": "Jennifer Hayes", "skill": "Urban Hiking", "location_name": "Watergraafsmeer", "coords": [52.346630875770856, 4.953281041850045]}, {"host": "Gregory Lawrence", "skill": "Machine Learning", "location_name": "IJburg", "coords": [52.34852635360944, 4.998355092133865]}, {"host": "Cody Rivera", "skill": "Photography", "location_name": "Oud-West", "coords": [52.36481214829917, 4.878346731627476]}, {"host": "Edward Gordon", "skill": "Data Viz", "location_name": "Buitenveldert", "coords": [52.331901825680156, 4.881937266350325]}, {"host": "Amanda Williams", "skill": "Data Viz", "location_name": "Zuidas", "coords": [52.33232820694897, 4.863754810778472]}, {"host": "Kelly Lawrence", "skill": "Financial Modeling", "location_name": "IJburg", "coords": [52.35020237075957, 5.013540954318032]}, {"host": "Monica Diaz", "skill": "Data Viz", "location_name": "Watergraafsmeer", "coords": [52.346045140232796, 4.935931467515759]}, {"host": "Andrew Phillips", "skill": "Photography", "location_name": "Buitenveldert", "coords": [52.33019731378778, 4.878097015631848]}, {"host": "Edward Lucero", "skill": "Python", "location_name": "IJburg", "coords": [52.35643956294076, 4.998220137471897]}, {"host": "Ronald Fox", "skill": "Painting", "location_name": "Oud-West", "coords": [52.36973640542264, 4.873415572237942]}, {"host": "Kevin Johnson", "skill": "Public Speaking", "location_name": "Bos en Lommer", "coords": [52.37279764482961, 4.841787138963609]}, {"host": "Debra Walker", "skill": "Data Viz", "location_name": "Oud-Zuid", "coords": [52.34802497643764, 4.863140040165666]}, {"host": "Michael Hart", "skill": "Financial Modeling", "location_name": "Plantage", "coords": [52.36111920524619, 4.914412096186911]}, {"host": "Edward Campbell", "skill": "SEO", "location_name": "Noord-Centrum", "coords": [52.393174962884636, 4.922317467274176]}, {"host": "George Gutierrez", "skill": "Photography", "location_name": "Westerpark", "coords": [52.38179336218523, 4.867525689614239]}, {"host": "Mark Krause", "skill": "Photography", "location_name": "Oud-West", "coords": [52.366309106330995, 4.875494659078227]}, {"host": "Ryan Moore", "skill": "Financial Modeling", "location_name": "De Pijp", "coords": [52.35881431217995, 4.900490712913918]}, {"host": "Robert Hernandez", "skill": "Dutch Cooking", "location_name": "IJburg", "coords": [52.353715907676346, 4.9978375840492975]}, {"host": "James Patel", "skill": "SEO", "location_name": "De Baarsjes", "coords": [52.36464913193448, 4.847925036547414]}, {"host": "Kimberly Johnson", "skill": "Gardening", "location_name": "Grachtengordel", "coords": [52.36652525070313, 4.883896795217472]}, {"host": "Jodi Martin", "skill": "UX Design", "location_name": "Westerpark", "coords": [52.383028262965084, 4.869754291858503]}, {"host": "Christian Garcia", "skill": "Agile Coach", "location_name": "Oud-Zuid", "coords": [52.3519418887535, 4.870571628191166]}, {"host": "Rebecca Webb", "skill": "Python", "location_name": "Buitenveldert", "coords": [52.335437663552774, 4.880479361941287]}, {"host": "Taylor Williamson", "skill": "Data Viz", "location_name": "Oosterparkbuurt", "coords": [52.35907787476461, 4.918230170838701]}, {"host": "Andrew Clark", "skill": "Photography", "location_name": "Oosterparkbuurt", "coords": [52.363222716346094, 4.910808798108429]}, {"host": "John Warner", "skill": "Urban Hiking", "location_name": "Grachtengordel", "coords": [52.36117504523701, 4.883566193342384]}, {"host": "Julie Cole", "skill": "Painting", "location_name": "Grachtengordel", "coords": [52.36766895870147, 4.889311981517138]}, {"host": "Marissa Watkins", "skill": "SEO", "location_name": "Grachtengordel", "coords": [52.36262598937184, 4.8852800777346825]}, {"host": "Sabrina Sexton", "skill": "Python", "location_name": "Oosterparkbuurt", "coords": [52.362453441708226, 4.9119740617323995]}, {"host": "Brian Mcdonald", "skill": "Public Speaking", "location_name": "De Baarsjes", "coords": [52.37096065942495, 4.8489463930625725]}, {"host": "Jonathan Marsh", "skill": "Python", "location_name": "De Baarsjes", "coords": [52.37340698387908, 4.848680008698611]}, {"host": "Brandon Lewis", "skill": "Ceramic Art", "location_name": "Zuidas", "coords": [52.33386647273079, 4.864519410361736]}, {"host": "William Bryant", "skill": "Agile Coach", "location_name": "Oud-West", "coords": [52.370211854853466, 4.8637676257639315]}, {"host": "Michael Gill", "skill": "Painting", "location_name": "Plantage", "coords": [52.36562428901782, 4.903468556303666]}, {"host": "Amanda Williams", "skill": "Urban Hiking", "location_name": "Oosterparkbuurt", "coords": [52.35896028779736, 4.919143687963383]}, {"host": "Bradley Walker", "skill": "Photography", "location_name": "Oosterparkbuurt", "coords": [52.36160517507602, 4.924140243206928]}, {"host": "Patricia Dickerson", "skill": "Gardening", "location_name": "Buitenveldert", "coords": [52.32708323876497, 4.874190442557592]}, {"host": "Raymond Miller", "skill": "Photography", "location_name": "Noord-Centrum", "coords": [52.39593273166622, 4.915202907297053]}, {"host": "Michelle Perry", "skill": "SEO", "location_name": "Jordaan", "coords": [52.37696898787594, 4.875922257354594]}, {"host": "Kathleen Ward", "skill": "Machine Learning", "location_name": "Buitenveldert", "coords": [52.3340743756258, 4.8797872621069756]}, {"host": "Amber Wheeler", "skill": "SEO", "location_name": "Watergraafsmeer", "coords": [52.34932037797798, 4.945647787956127]}, {"host": "Paul Vazquez", "skill": "Machine Learning", "location_name": "De Pijp", "coords": [52.35469467787199, 4.894690933163593]}, {"host": "Heidi Miles", "skill": "Painting", "location_name": "Oud-West", "coords": [52.362088272746796, 4.880269963486205]}, {"host": "Jeremy Hamilton", "skill": "Gardening", "location_name": "Grachtengordel", "coords": [52.36278955094659, 4.884491480474567]}, {"host": "Stephanie Abbott", "skill": "Yoga", "location_name": "Westerpark", "coords": [52.39022249243082, 4.876561687009412]}, {"host": "Ashley Wilkins", "skill": "Web Dev", "location_name": "Oud-West", "coords": [52.36219262224645, 4.865048604274256]}, {"host": "Kevin Bell", "skill": "Financial Modeling", "location_name": "Noord-Centrum", "coords": [52.39378071141091, 4.9252809244298135]}, {"host": "Jennifer Henry", "skill": "Agile Coach", "location_name": "Bos en Lommer", "coords": [52.3771847380168, 4.844868076500548]}, {"host": "Cameron Carter", "skill": "Data Viz", "location_name": "Oud-West", "coords": [52.36061819781213, 4.873495784743479]}, {"host": "Dylan Robertson", "skill": "Ceramic Art", "location_name": "Buitenveldert", "coords": [52.32733754128662, 4.881668425295567]}, {"host": "Benjamin Novak", "skill": "Ceramic Art", "location_name": "Oud-Zuid", "coords": [52.35542159283129, 4.8723568289317845]}, {"host": "Keith Cole", "skill": "Public Speaking", "location_name": "Indische Buurt", "coords": [52.360795908358604, 4.934630942404562]}, {"host": "Leah Anderson", "skill": "Web Dev", "location_name": "Buitenveldert", "coords": [52.32927872082448, 4.865648670060416]}, {"host": "Todd Young", "skill": "Urban Hiking", "location_name": "Jordaan", "coords": [52.37477240776551, 4.883728720820766]}, {"host": "Blake Stevenson", "skill": "Web Dev", "location_name": "Indische Buurt", "coords": [52.35980904813333, 4.950594193384033]}, {"host": "Jennifer Warren", "skill": "Urban Hiking", "location_name": "Grachtengordel", "coords": [52.3638750162147, 4.880873484315061]}, {"host": "Gabriel Smith", "skill": "Data Viz", "location_name": "IJburg", "coords": [52.353541687937074, 5.000647914737439]}, {"host": "Richard Lin", "skill": "Urban Hiking", "location_name": "Oosterparkbuurt", "coords": [52.35806314664641, 4.9101536538488855]}, {"host": "Mary Myers", "skill": "Web Dev", "location_name": "De Pijp", "coords": [52.35960807522242, 4.8923741504380285]}, {"host": "Samantha Davis", "skill": "Urban Hiking", "location_name": "Watergraafsmeer", "coords": [52.34575363465589, 4.955534111193703]}, {"host": "Matthew Powell", "skill": "Yoga", "location_name": "Oud-Zuid", "coords": [52.35643244607812, 4.8692619062210944]}, {"host": "Thomas Grimes Jr.", "skill": "Public Speaking", "location_name": "De Pijp", "coords": [52.355797695751555, 4.892711040073715]}, {"host": "Sydney Adams", "skill": "Machine Learning", "location_name": "Buitenveldert", "coords": [52.32720983514079, 4.879945198025193]}, {"host": "Gregory Johnston", "skill": "Web Dev", "location_name": "Oosterparkbuurt", "coords": [52.35790206945936, 4.92808816650843]}, {"host": "Amanda Kim", "skill": "Yoga", "location_name": "Jordaan", "coords": [52.37509335001315, 4.8841169516123175]}, {"host": "Leah Romero", "skill": "Photography", "location_name": "Grachtengordel", "coords": [52.367644917377326, 4.8791729270309085]}, {"host": "Elizabeth Horton", "skill": "Dutch Cooking", "location_name": "NDSM", "coords": [52.39636751864714, 4.896206139628903]}, {"host": "Deborah Harris", "skill": "Dutch Cooking", "location_name": "De Pijp", "coords": [52.354753983667834, 4.902704495845161]}, {"host": "Jenna Miller", "skill": "UX Design", "location_name": "Bos en Lommer", "coords": [52.381065413268054, 4.843135532800581]}, {"host": "Dr. Linda Johnson", "skill": "SEO", "location_name": "Oud-Zuid", "coords": [52.35773534839959, 4.875730317328149]}, {"host": "Carol Garcia", "skill": "Web Dev", "location_name": "De Baarsjes", "coords": [52.37030048412528, 4.853240749416766]}, {"host": "Heather Peterson", "skill": "Gardening", "location_name": "Oosterparkbuurt", "coords": [52.35716150035485, 4.915686679924976]}, {"host": "Jeffrey Holden", "skill": "Painting", "location_name": "Grachtengordel", "coords": [52.36622438245871, 4.874696682482428]}, {"host": "Erika Hughes", "skill": "Yoga", "location_name": "Jordaan", "coords": [52.37899251957889, 4.8869078976387215]}, {"host": "John Howard", "skill": "Gardening", "location_name": "Indische Buurt", "coords": [52.36678338569807, 4.951633116884127]}, {"host": "Meredith Boone", "skill": "Agile Coach", "location_name": "De Baarsjes", "coords": [52.36746674669603, 4.853891870203748]}, {"host": "Kimberly Daniels", "skill": "Ceramic Art", "location_name": "Noord-Centrum", "coords": [52.397224999208156, 4.920223179719018]}, {"host": "Adrian Lewis", "skill": "Photography", "location_name": "Jordaan", "coords": [52.37261190854539, 4.887609451420351]}, {"host": "Lisa Burns", "skill": "Public Speaking", "location_name": "Westerpark", "coords": [52.390927780823596, 4.882177327697687]}, {"host": "Sara Hamilton", "skill": "Data Viz", "location_name": "Noord-Centrum", "coords": [52.38785790411239, 4.921392648308195]}, {"host": "Kristina Ross", "skill": "Public Speaking", "location_name": "Indische Buurt", "coords": [52.364856028219855, 4.950031774917434]}, {"host": "Stephanie Campbell", "skill": "UX Design", "location_name": "NDSM", "coords": [52.3987925077717, 4.890434036349884]}, {"host": "Douglas Tapia", "skill": "Photography", "location_name": "Plantage", "coords": [52.37216820379259, 4.903978791155333]}, {"host": "Teresa Smith", "skill": "Public Speaking", "location_name": "Noord-Centrum", "coords": [52.390807040382306, 4.922520434716553]}, {"host": "Carol Richardson", "skill": "Data Viz", "location_name": "Grachtengordel", "coords": [52.365878695463515, 4.893153448224872]}, {"host": "Joseph Park", "skill": "UX Design", "location_name": "Grachtengordel", "coords": [52.36303311085447, 4.876284349585686]}, {"host": "Brian Hayden", "skill": "UX Design", "location_name": "De Pijp", "coords": [52.357765624340274, 4.890562023595374]}, {"host": "Ricardo Haney", "skill": "Public Speaking", "location_name": "De Pijp", "coords": [52.35862003375005, 4.904253058144348]}, {"host": "Darryl Pugh", "skill": "Python", "location_name": "Oud-West", "coords": [52.36984864108777, 4.873961877769783]}, {"host": "William Allison", "skill": "Agile Coach", "location_name": "NDSM", "coords": [52.40086631328896, 4.891638814260641]}];
    const NEIGHBORHOODS = {"Jordaan": [52.3753, 4.8819], "Grachtengordel": [52.3667, 4.8833], "Plantage": [52.3663, 4.9125], "Oud-West": [52.3655, 4.8724], "Westerpark": [52.3858, 4.8722], "Bos en Lommer": [52.3776, 4.8488], "De Baarsjes": [52.3697, 4.8546], "De Pijp": [52.3547, 4.8943], "Oud-Zuid": [52.3524, 4.8719], "Buitenveldert": [52.3306, 4.8752], "Zuidas": [52.3375, 4.8731], "Oosterparkbuurt": [52.3601, 4.9189], "Watergraafsmeer": [52.3508, 4.9458], "Indische Buurt": [52.3639, 4.9441], "IJburg": [52.3533, 5.0042], "Noord-Centrum": [52.3914, 4.9159], "NDSM": [52.4011, 4.8936]};
    let userTeach = [];
    let userLearn = [];
    let userHomeCoords = [52.36, 4.89];
    
    let filteredResults = [];
    let visibleCount = 6;

    function toggleTag(el, type) {
        el.classList.toggle('selected');
        const skill = el.innerText;
        if (type === 'teach') {
            userTeach.includes(skill) ? userTeach = userTeach.filter(s => s !== skill) : userTeach.push(skill);
        } else {
            userLearn.includes(skill) ? userLearn = userLearn.filter(s => s !== skill) : userLearn.push(skill);
        }
    }

    function getDistance(lat1, lon1, lat2, lon2) {
        const R = 6371;
        const dLat = (lat2 - lat1) * Math.PI / 180;
        const dLon = (lon2 - lon1) * Math.PI / 180;
        const a = Math.sin(dLat/2) * Math.sin(dLat/2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon/2) * Math.sin(dLon/2);
        return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    }

    function renderList() {
        const grid = document.getElementById('seminarGrid');
        const btn = document.getElementById('loadMoreBtn');
        
        const itemsToShow = filteredResults.slice(0, visibleCount);
        
        grid.innerHTML = itemsToShow.map(s => {
            const isSeeking = userLearn.includes(s.skill);
            // Dynamic labeling to clarify the role of the person
            const actionText = isSeeking ? "Learn From Others" : "Share Your Skills";
            const badgeColor = isSeeking ? 'var(--learn-color)' : 'var(--teach-color)';

            return '<div class="seminar-card">' +
                   '<div class="dist-tag">' + s.distance.toFixed(1) + ' KM</div>' +
                   '<div class="match-type" style="color: ' + badgeColor + '">' + actionText + '</div>' +
                   '<div style="font-weight: 900; font-size: 1.1rem; line-height: 1.2;">' + s.skill + '</div>' +
                   '<div class="host-name">Hosted by ' + s.host + '</div>' +
                   '<div style="font-size: 0.7rem; margin-top: 4px; opacity: 0.6; text-transform: uppercase; font-weight: bold;">' + s.location_name + '</div></div>';
        }).join('');

        if (visibleCount >= filteredResults.length) {
            btn.classList.add('hidden');
        } else {
            btn.classList.remove('hidden');
        }
    }

    function loadMore() {
        visibleCount += 10;
        renderList();
    }

    function showFinalResults() {
        document.getElementById('step2b').classList.add('hidden');
        document.getElementById('step3').classList.remove('hidden');
        document.getElementById('progress').style.width = '100%';

        filteredResults = allSeminars.filter(s => userLearn.includes(s.skill) || userTeach.includes(s.skill));
        filteredResults.forEach(s => {
            s.distance = getDistance(userHomeCoords[0], userHomeCoords[1], s.coords[0], s.coords[1]);
        });
        filteredResults.sort((a, b) => a.distance - b.distance);

        document.getElementById('matchCount').innerText = filteredResults.length + " Workshops Discovered ";

        renderList();

        setTimeout(() => {
            const map = L.map('map', { scrollWheelZoom: false }).setView(userHomeCoords, 13);
            L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png').addTo(map);
            
            // Your Location Marker
            L.circleMarker(userHomeCoords, { color: 'var(--dark)', fillColor: 'var(--dark)', fillOpacity: 1, radius: 8 })
             .addTo(map).bindPopup("<b>YOU ARE HERE</b>").openPopup();
            
            filteredResults.forEach(s => {
                const col = userLearn.includes(s.skill) ? 'var(--learn-color)' : 'var(--teach-color)';
                L.circleMarker(s.coords, { color: '#1a1a1a', fillColor: col, fillOpacity: 1, radius: 6, weight: 2 })
                 .addTo(map).bindPopup('<b>' + s.skill + '</b><br>Host: ' + s.host);
            });
        }, 300);
    }

    function goToStep2a() {
        if(!document.getElementById('userName').value || !document.getElementById('userEmail').value) return alert("Please fill in your details!");
        const locKey = document.getElementById('userLoc').value;
        const base = NEIGHBORHOODS[locKey];
        userHomeCoords = [base[0] + (Math.random()-0.5)*0.005, base[1] + (Math.random()-0.5)*0.008];
        document.getElementById('step1').classList.add('hidden');
        document.getElementById('step2a').classList.remove('hidden');
        document.getElementById('progress').style.width = '50%';
    }

    function goToStep2b() {
        document.getElementById('step2a').classList.add('hidden');
        document.getElementById('step2b').classList.remove('hidden');
        document.getElementById('progress').style.width = '75%';
    }
</script>
</body>
</html>
